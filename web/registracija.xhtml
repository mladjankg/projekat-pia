<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Busomanijak | Registracija</title>
        <!--        <link type="text/css" rel="stylesheet" href="css/style.css"></link>-->
        <script src="js/validation.js"></script>
    </h:head>
    <h:body>
        <div class="login-page">
            <div class="form">
                <h3>Registracija</h3>
<!--        <h:form onsubmit="return checkData(#{accountController.noviKorisnik.korisnickoIme}, #{accountController.noviKorisnik.lozinka}, #{accountController.noviKorisnik.potvrdaLozinke})">-->
                <h:form onsubmit="return test()" id="registrationForm">

                    <p:panelGrid columns="3" >

                        <h:outputLabel for="ime" value="Ime:"/>
                        <h:inputText id="ime" a:placeholder="ime" value="#{accountController.noviKorisnik.ime}" required="true" requiredMessage="Obavezno polje." label="Ime"/>
                        <h:message for ="ime" style="color:red"/> 

                        <h:outputLabel for="prezime" value="Prezime:"/>
                        <h:inputText id="prezime" a:placeholder="prezime" value="#{accountController.noviKorisnik.prezime}" required="true" requiredMessage="Obavezno polje." label="Prezime"/>
                        <h:message for ="prezime" style="color:red"/>

                        <h:outputLabel for="korisnickoIme" value="Korisničko Ime:"/>
                        <h:inputText id="korisnickoIme" a:placeholder="korisničko ime" value="#{accountController.noviKorisnik.korisnickoIme}" onblur="return checkUsername()" required="true" requiredMessage="Obavezno polje." label="Korisničko ime">
                            <f:validateLength minimum="4" maximum="15"/>
                        </h:inputText>
                        <h:message for ="korisnickoIme" style="color:red"/>
                        
                        <h:outputLabel for="lozinka" value="Lozinka:"/>
                        <h:inputSecret id="lozinka" a:placeholder="lozinka" value="#{accountController.noviKorisnik.lozinka}" required="true" requiredMessage="Obavezno polje." label="Lozinka">
                            <f:validateLength minimum="6" maximum="12"/>
                            <f:validateRegex pattern="^((?=.*[a-z]){3,})(?=.*[A-Z])(?=.*[!@#\$%\^&amp;_0-9])(((.*)\2?(?!\2))+)$"/>
                        </h:inputSecret>
                        <h:message for ="lozinka" style="color:red"/>

                        <h:outputLabel for="potvrdaLozinke" value="Potvrdi lozinke:"/>
                        <h:inputSecret id="potvrdaLozinke" a:placeholder="potvrda lozinke" value="#{accountController.noviKorisnik.potvrdaLozinke}" required="true" requiredMessage="Obavezno polje." label="Potvrdite lozinku"/>
                        <h:message for ="potvrdaLozinke" style="color:red"/>

                        <h:outputLabel for="adresa" value="Adresa:"/>
                        <h:inputText id="adresa" a:placeholder="adresa stanovanja" value="#{accountController.noviKorisnik.adresa}" required="true" requiredMessage="Obavezno polje." label="Adresa"/>
                        <h:message for ="adresa" style="color:red"/>

                        <h:outputLabel for="datumRodjenja" value="Datum rođenja:"/>
                        <h:inputText id="datumRodjenja" a:placeholder="datum rođenja (dd-mm-yyyy)" value="#{accountController.noviKorisnik.datumRodjenja}" required="true" requiredMessage="Obavezno polje." label="Datum rođenja">
                            <f:convertDateTime pattern="dd-mm-yyyy" />
                        </h:inputText>
                        <h:message for ="datumRodjenja" style="color:red"/>

                        <h:outputLabel for="telefon" value="Kontakt telefon:"/>
                        <h:inputText id="telefon" a:placeholder="kontakt telefon" value="#{accountController.noviKorisnik.telefon}" required="true" requiredMessage="Obavezno polje." label="Kontakt telefon"/>
                        <h:message for ="telefon" style="color:red"/>

                        <h:outputLabel for="kategorijaZaposlenja" value="Kategorija zaposlenja"/>
                        <h:selectOneRadio id="kategorijaZaposlenja" required="true" requiredMessage="Obavezno polje." value="#{accountController.noviKorisnik.kategorijaZaposlenja}" label="Kategorija zaposlenja" converter="kategorijaZaposlenjaConverter">
                            <f:selectItems value="#{registrationViewController.kategorije}" var="kat" itemLabel="#{kat.naziv}" itemValue="#{kat}" />
                        </h:selectOneRadio>
                        <h:message for ="kategorijaZaposlenja" style="color:red"/>

                        <h:outputLabel for="email" value="e-mail adresa"/>
                        <h:inputText id="email" a:placeholder="e-mail" value="#{accountController.noviKorisnik.mejl}" label="e-mail adresa"/>
                        <h:commandButton value="Registruj se" action="#{accountController.register()}"/>

                        </p:panelGrid>
                </h:form>
            </div>
        </div>
    </h:body>
</html>

