<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"    >
    <h:head>
        <title>Facelet Title</title>
        <f:metadata>
            <f:viewAction action="#{accountController.adminCheck}"/>
            <f:viewAction action="#{adminController.ucitajZahteve}"/>
        </f:metadata>
        
        <style type="text/css">
            #forma_vozac {
                float:left;
                display:inline-block;
            }
        </style>
    </h:head>
    <h:body>
        
        <div id="header">
            <ui:insert name="header">
                <ui:include src="template/header.xhtml"/>
            </ui:insert>
        </div>
        
         
        
        <p:tabView>
            <p:tab title="Zahtevi">
                <p:tabView>
                    <p:tab title="Zahtevi za registraciju">

                    </p:tab>
                    <p:tab title="Zahtevi za kupovinu karata">
                        <h:outputText value="Trenutno nema zahteva za kupovinu karata." rendered="#{empty adminController.zahteviZaKupovinu}"/>
                        <h:form>
                            <p:dataTable var="karta" value="#{adminController.zahteviZaKupovinu}" id="karte_gradski_prevoz" rendered="#{not empty adminController.zahteviZaKupovinu}">
                                <p:column headerText="Korisnik">
                                    <h:outputText value="#{karta.korisnik.ime} #{karta.korisnik.prezime}"/>
                                </p:column>
                                <p:column headerText="Datum kupovine">
                                    <h:outputText value="#{karta.datumKupovine}"/>
                                </p:column>
                                <!--TODO: Dodaj kategoriju korisnika-->
                                <p:column>
                                     <p:commandButton value="Odobri" update="karte_gradski_prevoz" action="#{adminController.obradiZahtevZaKupovinuKarte(karta, true)}"/>
                                </p:column>

                                <p:column>
                                    <p:commandButton value="Odbij" update="karte_gradski_prevoz" action="#{adminController.obradiZahtevZaKupovinuKarte(karta, false)}"/>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </p:tab>
                    <p:tab title="Zahtevi za rezervaciju karata">
                        <h:outputText value="Trenutno nema zahteva za rezervaciju." rendered="#{empty adminController.zahteviZaRezervaciju}"/>
                        <h:form>
                            <p:dataTable var="mgKarta" value="#{adminController.zahteviZaRezervaciju}" id="mg_rezervacije" rendered="#{not empty adminController.zahteviZaRezervaciju}">
                                <p:column headerText="Korisnik">
                                    <h:outputText value="#{mgKarta.korisnik.ime} #{mgKarta.korisnik.prezime}"/>
                                </p:column> 
                                
                                <p:column headerText="Od">
                                    <h:outputText value="#{mgKarta.linija.polaznaStanica.naziv}"/>
                                </p:column>
                                
                                <p:column headerText="Do">
                                    <h:outputText value="#{mgKarta.linija.odredisnaStanica.naziv}"/>
                                </p:column>
                                
                                <p:column headerText="Prevoznik">
                                    <h:outputText value="#{mgKarta.linija.prevoznik.naziv}" />
                                </p:column>
                                
                                <p:column headerText="Vreme polaska">
                                    <h:outputText value="#{mgKarta.linija.vremePolaska}"/>
                                </p:column>
                                
                                <p:column headerText="Datum rezervacije">
                                    <h:outputText value="#{mgKarta.datumRezervacije}"/>
                                </p:column>
                                
                                <p:column>
                                     <p:commandButton value="Odobri" update="mg_rezervacije" action="#{adminController.obradiZahtevZaRezervacijuKarte(mgKarta, true)}"/>
                                </p:column>

                                <p:column>
                                    <p:commandButton value="Odbij" update="mg_rezervacije" action="#{adminController.obradiZahtevZaRezervacijuKarte(mgKarta, false)}"/>
                                </p:column>
                            </p:dataTable>
                            
                    </h:form>
                    </p:tab>
                </p:tabView>
            </p:tab>
            <p:tab title="Gradske linije">
                <p:tabView>
                    <p:tab title="Linije">
                    </p:tab>
                    
                    <p:tab title="Vozači">
<!--                        <div id="forma_vozac">-->
                            <h:form>
                                <p:panelGrid columns="3" styleClass="form-panel-grid" >
                                    <h:outputLabel for="ime" value="Ime:"/>
                                    <h:inputText id="ime" value="#{adminController.noviVozac.ime}" required="true" requiredMessage="Obavezno polje." label="Ime"/>
                                    <h:message for ="ime" style="color:red"/> 

                                    <h:outputLabel for="prezime" value="Prezime:"/>
                                    <h:inputText id="prezime" value="#{adminController.noviVozac.prezime}" required="true" requiredMessage="Obavezno polje." label="Prezime"/>
                                    <h:message for ="prezime" style="color:red"/>

                                    <h:outputLabel for="datumRodjenja" value="Datum rođenja:"/>
                                    <p:calendar id="datumRodjenja" value="#{adminController.noviVozac.datumRodjenja}" navigator="true"/>
                                    <h:message for ="datumRodjenja" style="color:red"/>
                                    
                                    <h:outputLabel for="pocetakVoznje" value="Početak vožnje:"/>
                                    <p:calendar id="pocetakVoznje" value="#{adminController.noviVozac.pocetakVoznje}" navigator="true"/>
                                    <h:message for ="pocetakVoznje" style="color:red"/>
                                    
                                    <p:commandButton value="Dodaj vozača" action="#{adminController.dodajVozaca()}"/>
                                    
                                </p:panelGrid>
                            </h:form>

<!--                        </div>-->
                    </p:tab>                   
                </p:tabView>
            </p:tab>
            <p:tab title="Međugradske linije">

            </p:tab>
        </p:tabView>


    </h:body>
</html>

